#!/usr/bin/env node

"use strict";

var new_node_path = __dirname + "/tests/fixtures" + ":" +
                    __dirname + "/plugins" + ":" +
                    __dirname;

if (process.env.ENV_NODE_PATH) {
    process.env.ENV_NODE_PATH = new_node_path + ":" + new_node_path;
}
else {
    process.env.ENV_NODE_PATH = new_node_path;
}

try {
    var reporter = require('nodeunit').reporters.default;
}
catch(e) {
    console.log("Error: " + e.message);
    console.log("");
    console.log("Cannot find nodeunit module.");
    console.log("You can download submodules for this project by doing:");
    console.log("");
    console.log("    git submodule init");
    console.log("    git submodule update");
    console.log("");
    process.exit();
}

process.chdir(__dirname);
reporter.run(['tests/plugins', 'tests/plugins/queue']);
